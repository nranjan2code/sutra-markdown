# Sutra-Markdown V2 - Docker Environment Configuration
# Copy this file to .env.docker and fill in your values

# ============================================================================
# Application Settings
# ============================================================================
APP_ENV=production
LOG_LEVEL=INFO

# ============================================================================
# High-Performance Local Embedding Configuration
# ============================================================================
# Local embeddings provide unlimited free usage with high performance
EMBEDDING_MODE=local  # Always use local mode for privacy and performance

# High-performance settings optimized for containers
EMBEDDING_WORKERS=4  # Number of embedding worker processes
EMBEDDING_BATCH_SIZE=64  # Dynamic batching (1-128)
EMBEDDING_GPU_MEMORY_FRACTION=0.9  # Use 90% of GPU memory
EMBEDDING_CACHE_ENABLED=true  # Enable embedding caching

# Model paths (automatically downloaded in container)
NOMIC_TEXT_MODEL_PATH=/app/models/nomic-embed-v2
NOMIC_VISION_MODEL_PATH=/app/models/nomic-embed-vision-v1.5

# Performance monitoring
EMBEDDING_METRICS_ENABLED=true
EMBEDDING_PERFORMANCE_TARGET_RPS=10000
EMBEDDING_PERFORMANCE_TARGET_P95_MS=100

# ============================================================================
# LLM Providers (Optional - for Tier 3 conversions)
# ============================================================================
# OpenAI (Optional - for Tier 3 conversions)
# OPENAI_API_KEY=your_openai_api_key_here

# Anthropic (Optional - for Tier 3 conversions)
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google (Optional - for Tier 3 conversions)
# GOOGLE_API_KEY=your_google_api_key_here

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_URL=redis://redis:6379/0
CACHE_ENABLED=true
CACHE_TTL=86400

# ============================================================================
# MinIO/S3 Configuration (Optional)
# ============================================================================
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=${MINIO_ROOT_USER:-minioadmin}
S3_SECRET_KEY=${MINIO_ROOT_PASSWORD:-CHANGE_ME_IN_PRODUCTION}
S3_BUCKET=sutra-documents
USE_S3=false

# ============================================================================
# Performance Tuning
# ============================================================================
MAX_WORKERS=10
BATCH_SIZE=100
MAX_FILE_SIZE_MB=500

# ============================================================================
# Conversion Settings
# ============================================================================
DEFAULT_QUALITY=high
TIER_1_THRESHOLD=0.8
TIER_2_THRESHOLD=0.95

# ============================================================================
# Security (MUST change these in production!)
# ============================================================================
# Generate with: openssl rand -base64 64
SECRET_KEY=${SECRET_KEY:-CHANGE_ME_GENERATE_RANDOM_64_CHAR_SECRET}
API_KEY_REQUIRED=false
# API_KEY=${API_KEY:-your_api_key_here}

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
