# Sutra-Markdown Production Environment Configuration
# Copy to .env and customize for your deployment

# ============================================================================
# Build & Deployment Mode
# ============================================================================
BUILD_ENV=production                    # production|development
DEPLOYMENT_MODE=standard               # standard|high-performance|development
REMOVE_DEV_DEPS=true                  # Remove Jupyter, testing tools from production

# ============================================================================
# Performance Tuning
# ============================================================================
MAX_WORKERS=10                        # API worker processes
BATCH_SIZE=100                        # Document batch processing size
NOMIC_BATCH_SIZE=64                   # Embedding batch size
EMBEDDING_WORKERS=4                   # High-performance: embedding worker processes
EMBEDDING_SCALE=3                     # High-performance: number of worker containers

# ============================================================================
# Resource Limits (adjust for your hardware)
# ============================================================================
API_CPU_LIMIT=2                       # API container CPU limit
API_MEMORY_LIMIT=6G                   # API container memory limit (reduced from previous 4G)
EMBEDDING_CPU_LIMIT=2                 # Embedding worker CPU limit
EMBEDDING_MEMORY_LIMIT=4G             # Embedding worker memory limit

# ============================================================================
# Caching & Storage
# ============================================================================
CACHE_ENABLED=true
CACHE_TTL=86400                       # Cache TTL in seconds (24 hours)
MINIO_ROOT_USER=sutra
MINIO_ROOT_PASSWORD=CHANGE_ME_SECURE_PASSWORD_REQUIRED
MINIO_BUCKET_NAME=sutra-documents

# ============================================================================
# AI & Quality Settings
# ============================================================================
TIER_1_THRESHOLD=0.6                  # Fast processing threshold
TIER_2_THRESHOLD=0.8                  # Medium quality threshold
DEFAULT_QUALITY=high

# ============================================================================
# Hardware Optimization
# ============================================================================
NOMIC_DEVICE=auto                     # auto|cuda|cpu - Hardware detection
MAX_FILE_SIZE_MB=500                  # Maximum upload size

# ============================================================================
# Development Mode Only (when BUILD_ENV=development)
# ============================================================================
# DEV_CODE_MOUNT=./sutra              # Mount source code for hot reload
# API_PORT=8000                       # API port (default: 8000)

# ============================================================================
# Image Size Optimization Results
# ============================================================================
# Before optimization: 3.65GB (with Jupyter, dev tools, testing frameworks)
# After optimization:  ~1.5GB (production-only dependencies)
# Size reduction:      ~60% smaller Docker images
# 
# Removed in production:
# - jupyter, ipython, ipdb (debugging tools)
# - pytest, black, ruff, mypy (testing/linting)
# - mkdocs, documentation tools
# - watchdog, development utilities
# - Unused ML libraries (when not needed)